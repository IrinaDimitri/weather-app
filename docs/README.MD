# Weather API ‚òÄÔ∏èüåßÔ∏è‚õÖ

Spring Boot –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏ –æ –ø–æ–≥–æ–¥–µ.  
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL, Open-Meteo API, Swagger –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ Docker.

---

## ‚öôÔ∏è –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Java 17+
- Maven 3.6+
- Docker + Docker Compose

### –°–±–æ—Ä–∫–∞ JAR
    mvn clean package
    –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose
    bash
    docker-compose -f docker/docker-compose.yml down
    docker-compose -f docker/docker-compose.yml up -d --build

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å–∞–º: http://localhost:8080 –ò http://localhost/

# üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
## GET /ping
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞

–û—Ç–≤–µ—Ç —É—Å–ø–µ—Ö–∞:

    Response (200 OK):
    <html><body><h1>PONG</h1></body></html>
–ü—Ä–æ–≤–µ—Ä–∫–∞:

    curl http://localhost/ping

–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ REST API:

    GET http://localhost/ping

–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

    http://localhost/ping

## GET /health
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –æ—Ç–≤–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON

Response (200 OK):

    {"status": "HEALTHY"}
–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

    curl http://localhost/health

–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ REST API:

    GET http://localhost/health
## GET /list
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤ –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä

–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK, HTML), –ø—Ä–∏–º–µ—Ä:

    html
    <html><body>
    <ul>
        <li>Berlin: 20¬∞C</li>
        <li>Paris: 23¬∞C</li>
    </ul>
    </body></html>
–ü—É—Å—Ç–∞—è –±–∞–∑–∞ (200 OK):

    <html><body><ul></ul></body></html>
–ü—Ä–æ–≤–µ—Ä–∫–∞:

–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

    curl http://localhost/list

–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ REST API: 

    GET http://localhost/list

## POST /add
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä     | –¢–∏–ø      | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ                          |
|--------------|----------|--------------|-----------------------------------|
| `city`       | `String` | ‚úÖ           | –ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ (–ª–∞—Ç–∏–Ω–∏—Ü–∞ –∏ –¥–µ—Ñ–∏—Å—ã) |
| `temperature`| `Integer`| ‚ùå           | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20)      |
| `forceUpdate`| `Boolean`| ‚ùå           | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ          |

–£—Å–ø–µ—à–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ: (200 OK, HTML):

    <html><body>
    <h2>–£—Å–ø–µ—Ö!</h2>
    <p>–ì–æ—Ä–æ–¥ "Berlin" –¥–æ–±–∞–≤–ª–µ–Ω —Å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π 20¬∞C.</p>
    </body></html>
–£—Å–ø–µ—à–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (200 OK):

    html
    <html><body>
    <h2>–£—Å–ø–µ—Ö!</h2>
    <p>–ì–æ—Ä–æ–¥ "Berlin" –æ–±–Ω–æ–≤–ª–µ–Ω —Å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π 22¬∞C.</p>
    </body></html>
–û—à–∏–±–∫–∏:

–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≥–æ—Ä–æ–¥–∞ (400 Bad Request):

    <html><body>
    <h2>–û—à–∏–±–∫–∞!</h2>
    <p>–ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã –∏ –¥–µ—Ñ–∏—Å—ã.</p>
    </body></html>
–ì–æ—Ä–æ–¥ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (400 Bad Request):

    <html><body>
    <h2>–û—à–∏–±–∫–∞!</h2>
    <p>–ì–æ—Ä–æ–¥ "Berlin" —É–∂–µ –µ—Å—Ç—å –≤ –±–∞–∑–µ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ?forceUpdate=true.</p>
    </body></html>
–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (500 Internal Server Error):

    <html><body>
    <h2>–û—à–∏–±–∫–∞!</h2>
    <p>–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö: ...</p>
    </body></html>
–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞:
    
    curl -X POST "http://localhost/add?city=Berlin"
    
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞:
    
    curl -X POST "http://localhost/add?city=Berlin&forceUpdate=true"

–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ REST API: 
    
    POST "http://localhost/add?city=Berlin

–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: 

    http://localhost/add?city=Berlin&forceUpdate=true


## POST /update open weather data
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –≤ open weather data

–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK):

    Weather data updated successfully
–û—à–∏–±–∫–∞ (501 Not Implemented):

    Weather update functionality is not implemented
–ü—Ä–æ–≤–µ—Ä–∫–∞:

    curl http://localhost/update

REST API:

    GET http://localhost/update
–í –±—Ä–∞—É–∑–µ—Ä–µ: 

    http://localhost/update

## DELETE /delete
- –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–∞–±–ª–∏—Ü–µ

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø      | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ                  | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è                     |
|----------|----------|--------------|---------------------------|--------------------------------|
| `city`   | `String` | ‚ùå           | –ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞           | –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å `all=true` |
| `all`    | `Boolean`| ‚ùå           | –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ        | –¢—Ä–µ–±—É–µ—Ç—Å—è `all=true` –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ |

> **‚ÑπÔ∏è –ü—Ä–∞–≤–∏–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
> - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∫–∞–∑–∞–Ω **—Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω** –ø–∞—Ä–∞–º–µ—Ç—Ä
> - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã `city` –∏ `all` **–Ω–µ–ª—å–∑—è** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
> - –î–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `?all=true`
> - –î–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `?city=–Ω–∞–∑–≤–∞–Ω–∏–µ`

–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—â–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:

    <html><body>
    <h2>–£—Å–ø–µ—Ö!</h2>
    <p>–ì–æ—Ä–æ–¥ "Berlin" —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω.</p>
    </body></html>
–£—Å–ø–µ—à–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤ (200 OK):

    <html><body>
    <h2>–£—Å–ø–µ—Ö!</h2>
    <p>–í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω—ã.</p>
    </body></html>
–û—à–∏–±–∫–∏:

1. –ù–µ —É–∫–∞–∑–∞–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (400 Bad Request):
    ```html
    <html>
      <body>
        <h2>–û—à–∏–±–∫–∞!</h2>
        <p>–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä all=true.</p>
      </body>
    </html>
    ```
2. –£–∫–∞–∑–∞–Ω city, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
    ```html
    <html><body>
    <h2>–û—à–∏–±–∫–∞!</h2>
    <p>–ì–æ—Ä–æ–¥ "London" –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –±–∞–∑–µ.</p>
    </body></html>
    ```
–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:
1. –£–¥–∞–ª–∏—Ç—å –≥–æ—Ä–æ–¥

    curl -X DELETE "http://localhost/delete?city=Berlin"

REST API:
    
    DELETE http://localhost/delete?city=Berlin

–í –±—Ä–∞—É–∑–µ—Ä–µ:

    http://localhost/delete?city=Berlin

2. –£–¥–∞–ª–∏—Ç—å –≤—Å–µ
    
    curl -X DELETE "http://localhost/delete?all=true

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π:
```text
üì¶ project-root
‚îú‚îÄ‚îÄ üê≥ docker/
‚îÇ   ‚îú‚îÄ‚îÄ üêã Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ üêô docker-compose.yml
‚îú‚îÄ‚îÄ üìö docs/
‚îÇ   ‚îú‚îÄ‚îÄ üìù README.md
‚îÇ   ‚îî‚îÄ‚îÄ üöÄ Weather-app.postman_collection.json
‚îú‚îÄ‚îÄ üîí nginx/
‚îÇ   ‚îú‚îÄ‚îÄ üìú logs/
‚îÇ   ‚îî‚îÄ‚îÄ ‚öôÔ∏è nginx.conf
‚îú‚îÄ‚îÄ üíª src/
‚îÇ   ‚îú‚îÄ‚îÄ üìú logs/weather-app.log
‚îÇ   ‚îî‚îÄ‚îÄ ‚òï main/java/com/example/
‚îÇ       ‚îú‚îÄ‚îÄ üèóÔ∏è WeatherApp.java
‚îÇ       ‚îú‚îÄ‚îÄ üéÆ WeatherController.java
‚îÇ       ‚îú‚îÄ‚îÄ ‚öôÔ∏è config/SwaggerConfig.java
‚îÇ       ‚îú‚îÄ‚îÄ üß© model/Weather.java
‚îÇ       ‚îú‚îÄ‚îÄ üóÑÔ∏è repository/WeatherRepository.java
‚îÇ       ‚îî‚îÄ‚îÄ ‚ö° service/WeatherService.java
‚îú‚îÄ‚îÄ ‚öôÔ∏è application.properties
‚îú‚îÄ‚îÄ üóÉÔ∏è data.sql
‚îî‚îÄ‚îÄ üì¶ pom.xml
```
## üìë Swagger UI

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å–∞–º:
- http://localhost/swagger-ui/index.html
- http://localhost:8080/swagger-ui/index.html

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Postman
–§–∞–π–ª –∫–æ–ª–ª–µ–∫—Ü–∏–∏: docs/Weather-app.postman_collection.json

## üõ†Ô∏è –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é. –ò–Ω—Ç–µ—Ä–≤–∞–ª –∑–∞–¥–∞—ë—Ç—Å—è –≤ application.properties:

    properties
    weather.update.interval=3600000  # 1 —á–∞—Å –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
